const FALLBACK_SVG_IMG=`data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20WIDTH%20HEIGHT'%3E%3C/svg%3E`;const LAZYLOAD_IMG_SRC="data-lazy-load"
function changeSrcToLazySrcInImgTag(content=""){var parser=new DOMParser();var doc=parser.parseFromString(content,"text/html");Array.from(doc.querySelectorAll(".dib-post-featured-image img, .dib-post-content img, img.dib-post-featured-image, .dib-author-photo img")).forEach((img)=>{img.setAttribute(LAZYLOAD_IMG_SRC,img.getAttribute("src"));img.setAttribute("loading","dib-lazy");img.classList.add("dib-img-loading");img.setAttribute("src",FALLBACK_SVG_IMG);});return doc.body.innerHTML}
function main(){createLinkTag("https://io.dropinblog.com/css/templates.css?v=20221005","stylesheet","text/css");var querystring=window.location.search.substring(1);if(querystring){querystring="&"+querystring;}
if(typeof dib_categories!="undefined"&&dib_categories!=""){querystring+="&categories="+dib_categories;}
if(typeof dib_authors!="undefined"&&dib_authors!=""){querystring+="&authors="+dib_authors;}
if(typeof dib_recent_posts!="undefined"&&dib_recent_posts>0){querystring+="&recentposts="+dib_recent_posts;}
if(typeof dib_recent_posts_categories!="undefined"&&dib_recent_posts_categories){querystring+="&recentpostscategories="+dib_recent_posts_categories;}
if(typeof dib_recent_post_list!="undefined"&&dib_recent_post_list>0){querystring+="&recentpostlist="+dib_recent_post_list;}
if(typeof dib_recent_post_list_categories!="undefined"&&dib_recent_post_list_categories){querystring+="&recentpostlistcategories="+dib_recent_post_list_categories;}
if(typeof dib_specific_posts!="undefined"&&dib_specific_posts.length>0){querystring+="&specificposts="+dib_specific_posts;}
if(typeof dib_specific_posts_list!="undefined"&&dib_specific_posts_list.length>0){querystring+="&specificpostslist="+dib_specific_posts_list;}
if(typeof dib_list_include_content!="undefined"){querystring+="&listincludecontent="+dib_list_include_content;}
if(typeof dib_thinkific!="undefined"&&dib_thinkific==1){querystring+="&thinkific=1";}
if(typeof dib_thinkific_page_url!="undefined"&&dib_thinkific_page_url!=""){querystring+="&thinkificpageurl="+dib_thinkific_page_url;}
if(typeof dib_base_url!="undefined"){querystring+="&baseurl="+dib_base_url;}
querystring+="&domain="+window.location.host;var url="https://api.dropinblog.com/v1/embed?b="+window.dib_id+querystring;var script=document.createElement("script");script.id="dibscript";script.src=url+"&format=jsonp&callback=parseData";document.body.appendChild(script);}
function lazyLoadImagesInit(){var lazyloadImages;const lazyLoadOptions={root:null,rootMargin:"500px 0%",};if("IntersectionObserver"in window){lazyloadImages=document.querySelectorAll("img[loading='dib-lazy']");var imageObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry,index){var img=entry.target;if(entry.isIntersecting&&!img.classList.contains("dib-lazy-loaded")){img.src=img.getAttribute(LAZYLOAD_IMG_SRC);img.onerror=img.onload=()=>{img.classList.add("dib-lazy-loaded");img.classList.remove("dib-img-loading");}
imageObserver.unobserve(img);}});},lazyLoadOptions);lazyloadImages.forEach(function(image){imageObserver.observe(image);});}}
function parseData(json){document.getElementById('dibscript').remove();appendElements(json.data);setTimeout(()=>{lazyLoadImagesInit()});}
function createLinkTag(src,rel,type,title){var link=document.createElement("link");link.href=src;link.rel=rel;if(type){link.type=type;}
if(title){link.title=title;}
appendTo("head",link);return link;}
function addScript(src){var s=document.createElement("script");s.setAttribute("src",src);document.body.appendChild(s);}
function addStyle(css){var style=document.createElement("style");style.textContent=css;appendTo("head",style);}
function appendTo(root,ele){document.getElementsByTagName(root)[0].appendChild(ele);}
function createMeta(content,property){document.querySelector("meta[property='"+property+"']")?.remove();const meta=document.createElement("meta");meta.setAttribute("property",property);meta.setAttribute("content",content);appendTo("head",meta);}
function addContent(divId,content,process){try{el=document.getElementById(divId);el.innerHTML=content;if(process){var scripts=el.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=document.createElement("script");if(scripts[i].text){script.text=scripts[i].text;}else{for(var j=0;j<scripts[i].attributes.length;j++){if(scripts[i].attributes[j].name in HTMLScriptElement.prototype){script[scripts[i].attributes[j].name]=scripts[i].attributes[j].value;}}}
scripts[i].parentNode.replaceChild(script,scripts[i]);}}}catch(e){}}
function appendElements(data){data.content=changeSrcToLazySrcInImgTag(data.content)
if(data.customCss){addStyle(data.customCss);}
if(data.additional_head_code){appendTo("head",document.createRange().createContextualFragment(data.additional_head_code));}
if(data.content){addContent("dib-posts",data.content,true);}
if(data.categories){addContent("dib-categories",data.categories,false);}
if(data.authors){addContent("dib-authors",data.authors,false);}
if(data.recent_posts){addContent("dib-recent-posts",data.recent_posts,false);}
if(data.recent_post_list){addContent("dib-recent-post-list",data.recent_post_list,false);}
if(data.specific_posts){addContent("dib-specific-posts",data.specific_posts,false);}
if(data.specific_posts_list){addContent("dib-specific-posts-list",data.specific_posts_list,false);}
if(data.search_form){addContent("dib-search-form",data.search_form,false);}
if(data.additional_js_files){data.additional_js_files.forEach(function(jsfile){addScript(jsfile);});}
if(data.rssUrl){createLinkTag(data.rssUrl,"alternate","application/rss+xml",data.rssTitle);}
if(typeof dib_ignore_meta=="undefined"||!dib_ignore_meta){var canonical_found=false;var headlinks=document.getElementsByTagName("link");for(var i=0;i<headlinks.length;i++){if(headlinks[i].rel=="canonical"){headlinks[i].href=window.location;canonical_found=true;}}
if(!canonical_found){createLinkTag(data.canonicalUrl?data.canonicalUrl:window.location,"canonical");}
if(data.headTitle){document.title=data.headTitle;}
var meta_description_found=false;if(data.headDescription){var meta=document.getElementsByTagName("meta");for(var i=0;i<meta.length;i++){if(meta[i].name.toLowerCase()=="description"){meta[i].content=data.headDescription;meta_description_found=true;}}}
if(!meta_description_found){var meta=document.createElement("meta");meta.setAttribute("content",data.headDescription||"");meta.setAttribute("name","description");document.head.appendChild(meta);}
setOgTags(data);}
readProgressIndicator();}
function setOgTags(data){createMeta(window.location,"og:url");createMeta("website","og:type");if(data.headTitle){createMeta(data.headTitle,"og:title");}
if(data.headDescription){createMeta(data.headDescription,"og:description");}
if(data.og_image){createMeta(data.og_image,"og:image");}}
function readProgressIndicator(){const dib_pie=document.getElementById("dib-pie");if(dib_pie==undefined||!dib_pie){return true;}
appendTo("body",dib_pie);const container=document.getElementById("dib-post-single");var containerHeight;const dib_pie_fill=document.getElementById("dib-pie-fill");window.onscroll=function(){containerHeight=container.offsetHeight-window.innerHeight;containerPos=container.getBoundingClientRect();diff=containerHeight+containerPos.top;progressPercentage=(diff/containerHeight)*100;cssWidth=100-progressPercentage;cssRotate=(360*cssWidth)/100;dib_pie_fill.style.transform="rotate("+cssRotate+"deg)";if(cssWidth>50){dib_pie.classList.add("dib-pie-50");}else{dib_pie.classList.remove("dib-pie-50");}
if(cssWidth<0||cssWidth>100){dib_pie_fill.style.display="none";dib_pie.style.opacity=0;}else{dib_pie_fill.style.display="block";dib_pie.style.opacity=1;}};}
if(document.readyState!=='loading'){main();}else{document.addEventListener('DOMContentLoaded',function(){main();});}